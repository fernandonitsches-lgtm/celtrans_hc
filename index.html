<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Atribuição Diária de Setores</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Babel -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>

<body class="bg-slate-100 min-h-screen">
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;

    /* ===== ICONES SVG (SEM CDN) ===== */
    const IconUsers = () => (
      <svg className="w-4 h-4" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
        <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
        <circle cx="9" cy="7" r="4"/>
        <path d="M23 21v-2a4 4 0 00-3-3.87"/>
        <path d="M16 3.13a4 4 0 010 7.75"/>
      </svg>
    );

    const IconDownload = () => (
      <svg className="w-4 h-4" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
        <polyline points="7 10 12 15 17 10"/>
        <line x1="12" y1="15" x2="12" y2="3"/>
      </svg>
    );

    const IconReset = () => (
      <svg className="w-4 h-4" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
        <polyline points="1 4 1 10 7 10"/>
        <path d="M3.51 15a9 9 0 102.13-9.36L1 10"/>
      </svg>
    );

    /* ===== APP ===== */
    function SectorAssignment() {
      const [people, setPeople] = useState([
        "Ana", "Bruno", "Carlos", "Daniela", "Eduardo", "Fernanda"
      ]);

      const [sectors, setSectors] = useState({
        Expedição: [],
        Conferência: [],
        Produção: [],
        Administrativo: []
      });

      function movePerson(person, sector) {
        setPeople(prev => prev.filter(p => p !== person));
        setSectors(prev => ({
          ...prev,
          [sector]: [...prev[sector], person]
        }));
      }

      function resetAll() {
        setPeople([
          "Ana", "Bruno", "Carlos", "Daniela", "Eduardo", "Fernanda"
        ]);
        setSectors({
          Expedição: [],
          Conferência: [],
          Produção: [],
          Administrativo: []
        });
      }

      function exportCSV() {
        let csv = "Setor,Nome\n";
        Object.entries(sectors).forEach(([sector, list]) => {
          list.forEach(name => {
            csv += `${sector},${name}\n`;
          });
        });

        const blob = new Blob([csv], { type: "text/csv" });
        const url = URL.createObjectURL(blob);

        const a = document.createElement("a");
        a.href = url;
        a.download = "atribuicao_setores.csv";
        a.click();
        URL.revokeObjectURL(url);
      }

      return (
        <div className="max-w-6xl mx-auto p-6 space-y-6">
          <h1 className="text-2xl font-bold">
            Atribuição Diária de Setores
          </h1>

          <div className="flex gap-2">
            <button onClick={exportCSV}
              className="flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded">
              <IconDownload /> Exportar CSV
            </button>

            <button onClick={resetAll}
              className="flex items-center gap-2 bg-gray-500 text-white px-4 py-2 rounded">
              <IconReset /> Resetar
            </button>
          </div>

          <div>
            <h2 className="font-semibold flex items-center gap-2">
              <IconUsers /> Pessoas disponíveis
            </h2>
            <div className="flex flex-wrap gap-2 mt-2">
              {people.map(p => (
                <button key={p}
                  className="px-3 py-1 bg-white border rounded shadow">
                  {p}
                </button>
              ))}
            </div>
          </div>

          <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
            {Object.keys(sectors).map(sector => (
              <div key={sector} className="bg-white p-3 rounded shadow">
                <h3 className="font-bold mb-2">{sector}</h3>
                <div className="space-y-1">
                  {sectors[sector].map(name => (
                    <div key={name} className="text-sm">{name}</div>
                  ))}
                </div>

                {people.map(p => (
                  <button key={p}
                    onClick={() => movePerson(p, sector)}
                    className="mt-2 text-xs text-blue-600 block">
                    + {p}
                  </button>
                ))}
              </div>
            ))}
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root"))
      .render(<SectorAssignment />);
  </script>
</body>
</html>
